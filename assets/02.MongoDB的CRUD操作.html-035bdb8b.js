import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as r,c as l,a as n,d as e,b as s,e as t}from"./app-9f0b185d.js";const c={},i=t('<h1 id="mongodb-的-crud-操作" tabindex="-1"><a class="header-anchor" href="#mongodb-的-crud-操作" aria-hidden="true">#</a> MongoDB 的 CRUD 操作</h1><h2 id="一、基本-crud-操作" tabindex="-1"><a class="header-anchor" href="#一、基本-crud-操作" aria-hidden="true">#</a> 一、基本 CRUD 操作</h2><p>MongoDB 的 CRUD 操作是针对 document 的读写操作。</p><h3 id="create-操作" tabindex="-1"><a class="header-anchor" href="#create-操作" aria-hidden="true">#</a> Create 操作</h3><p>MongoDB 提供以下操作向一个 collection 插入 document</p>',5),u={href:"https://docs.mongodb.com/manual/reference/method/db.collection.insertOne/#db.collection.insertOne",target:"_blank",rel:"noopener noreferrer"},d=n("code",null,"db.collection.insertOne()",-1),k={href:"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany",target:"_blank",rel:"noopener noreferrer"},m=n("code",null,"db.collection.insertMany()",-1),b=n("blockquote",null,[n("p",null,"注：以上操作都是原子操作。")],-1),h=n("figure",null,[n("img",{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924112342.svg",alt:"img",tabindex:"0",loading:"lazy"}),n("figcaption",null,"img")],-1),y=n("p",null,"插入操作的特性：",-1),g=n("li",null,"MongoDB 中的所有写操作都是单个文档级别的原子操作。",-1),_=n("li",null,"如果要插入的 collection 当前不存在，则插入操作会自动创建 collection。",-1),v={href:"https://docs.mongodb.com/manual/reference/glossary/#term-id",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"_id",-1),x=n("code",null,"_id",-1),M=n("code",null,"_id",-1),w=n("li",null,"可以 MongoDB 写入操作的确认级别来控制写入行为。",-1),D=t(`<p>【示例】插入一条 document 示例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;canvas&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;cotton&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】插入多条 document 示例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;journal&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;blank&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mat&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;gray&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">27.9</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mousepad&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;gel&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;blue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="read-操作" tabindex="-1"><a class="header-anchor" href="#read-操作" aria-hidden="true">#</a> Read 操作</h3>`,5),B={href:"https://docs.mongodb.com/manual/reference/method/db.collection.find/#db.collection.find",target:"_blank",rel:"noopener noreferrer"},O=n("code",null,"db.collection.find()",-1),j=n("figure",null,[n("img",{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924113832.svg",alt:"img",tabindex:"0",loading:"lazy"}),n("figcaption",null,"img")],-1),W=n("h3",{id:"update-操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#update-操作","aria-hidden":"true"},"#"),s(" Update 操作")],-1),q=n("p",null,"MongoDB 提供以下操作来更新 collection 中的 document",-1),z={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne",target:"_blank",rel:"noopener noreferrer"},A=n("code",null,"db.collection.updateOne()",-1),C={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany",target:"_blank",rel:"noopener noreferrer"},L=n("code",null,"db.collection.updateMany()",-1),S={href:"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne",target:"_blank",rel:"noopener noreferrer"},E=n("code",null,"db.collection.replaceOne()",-1),N=n("p",null,"语法格式：",-1),$={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne",target:"_blank",rel:"noopener noreferrer"},T=n("code",null,"db.collection.updateOne(<filter>, <update>, <options>)",-1),I={href:"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany",target:"_blank",rel:"noopener noreferrer"},R=n("code",null,"db.collection.updateMany(<filter>, <update>, <options>)",-1),U={href:"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne",target:"_blank",rel:"noopener noreferrer"},Q=n("code",null,"db.collection.replaceOne(<filter>, <update>, <options>)",-1),P=t(`<figure><img src="https://raw.githubusercontent.com/dunwu/images/master/snap/20200924114043.svg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>【示例】插入测试数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;canvas&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;journal&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mat&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">27.9</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">35.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;mousepad&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;notebook&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;planner&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;D&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;postcard&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">15.25</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;sketchbook&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;sketch pad&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">95</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token number">22.85</span><span class="token punctuation">,</span> <span class="token literal-property property">w</span><span class="token operator">:</span> <span class="token number">30.5</span><span class="token punctuation">,</span> <span class="token literal-property property">uom</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】更新一条 document</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;size.uom&#39;</span><span class="token operator">:</span> <span class="token string">&#39;cm&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">$currentDate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】更新多条 document</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;size.uom&#39;</span><span class="token operator">:</span> <span class="token string">&#39;in&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;P&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">$currentDate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>【示例】替换一条 document</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">replaceOne</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token string">&#39;paper&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">instock</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">warehouse</span><span class="token operator">:</span> <span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">warehouse</span><span class="token operator">:</span> <span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">qty</span><span class="token operator">:</span> <span class="token number">40</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新操作的特性：</p>`,10),V=n("li",null,"MongoDB 中的所有写操作都是单个文档级别的原子操作。",-1),G={href:"https://docs.mongodb.com/manual/reference/glossary/#term-id",target:"_blank",rel:"noopener noreferrer"},F=n("code",null,"_id",-1),H=n("li",null,[s("除以下情况外，MongoDB 会在执行写操作后保留文档字段的顺序： "),n("ul",null,[n("li",null,[n("code",null,"_id"),s(" 字段始终是文档中的第一个字段。")]),n("li",null,"包括重命名字段名称的更新可能导致文档中字段的重新排序。")])],-1),J=n("li",null,[s("如果更新操作中包含 "),n("code",null,"upsert : true"),s(" 并且没有 document 匹配过滤器，MongoDB 会新插入一个 document；如果有匹配的 document，MongoDB 会修改或替换这些 document。")],-1),K=n("h3",{id:"delete-操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#delete-操作","aria-hidden":"true"},"#"),s(" Delete 操作")],-1),X=n("p",null,"MongoDB 提供以下操作来删除 collection 中的 document",-1),Y={href:"https://docs.mongodb.com/manual/reference/method/db.collection.deleteOne/#db.collection.deleteOne",target:"_blank",rel:"noopener noreferrer"},Z=n("code",null,"db.collection.deleteOne()",-1),nn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.deleteMany/#db.collection.deleteMany",target:"_blank",rel:"noopener noreferrer"},sn=n("code",null,"db.collection.deleteMany()",-1),an=n("figure",null,[n("img",{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924120007.svg",alt:"img",tabindex:"0",loading:"lazy"}),n("figcaption",null,"img")],-1),en=n("p",null,"删除操作的特性：",-1),tn=n("ul",null,[n("li",null,"MongoDB 中的所有写操作都是单个文档级别的原子操作。")],-1),on=n("h2",{id:"二、批量写操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#二、批量写操作","aria-hidden":"true"},"#"),s(" 二、批量写操作")],-1),pn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},rn=n("code",null,"db.collection.bulkWrite()",-1),ln={href:"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany",target:"_blank",rel:"noopener noreferrer"},cn=n("code",null,"db.collection.insertMany()",-1),un=n("h3",{id:"有序和无序的操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#有序和无序的操作","aria-hidden":"true"},"#"),s(" 有序和无序的操作")],-1),dn=n("p",null,"批量写操作可以有序或无序。",-1),kn=n("ul",null,[n("li",null,"对于有序列表，MongoDB 串行执行操作。如果在写操作的处理过程中发生错误，MongoDB 将不处理列表中剩余的写操作。"),n("li",null,"对于无序列表，MongoDB 可以并行执行操作，但是不能保证此行为。如果在写操作的处理过程中发生错误，MongoDB 将继续处理列表中剩余的写操作。")],-1),mn=n("p",null,"在分片集合上执行操作的有序列表通常比执行无序列表要慢，因为对于有序列表，每个操作必须等待上一个操作完成。",-1),bn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},hn=n("code",null,"bulkWrite()",-1),yn=n("code",null,"ordered : false",-1),gn=n("h3",{id:"bulkwrite-方法",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#bulkwrite-方法","aria-hidden":"true"},"#"),s(" bulkWrite() 方法")],-1),_n={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},vn=n("code",null,"bulkWrite()",-1),fn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-insertone",target:"_blank",rel:"noopener noreferrer"},xn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany",target:"_blank",rel:"noopener noreferrer"},Mn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany",target:"_blank",rel:"noopener noreferrer"},wn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-replaceone",target:"_blank",rel:"noopener noreferrer"},Dn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany",target:"_blank",rel:"noopener noreferrer"},Bn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany",target:"_blank",rel:"noopener noreferrer"},On=t(`<p>【示例】批量写操作示例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">.</span>characters<span class="token punctuation">.</span><span class="token function">bulkWrite</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">insertOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">document</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
          <span class="token literal-property property">char</span><span class="token operator">:</span> <span class="token string">&#39;Dithras&#39;</span><span class="token punctuation">,</span>
          <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;barbarian&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">lvl</span><span class="token operator">:</span> <span class="token number">4</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">insertOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">document</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token literal-property property">char</span><span class="token operator">:</span> <span class="token string">&#39;Taeln&#39;</span><span class="token punctuation">,</span>
          <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;fighter&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">lvl</span><span class="token operator">:</span> <span class="token number">3</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">updateOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">char</span><span class="token operator">:</span> <span class="token string">&#39;Eldon&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">update</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;Critical Injury&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">deleteOne</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">char</span><span class="token operator">:</span> <span class="token string">&#39;Brisbane&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">replaceOne</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">char</span><span class="token operator">:</span> <span class="token string">&#39;Meldane&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">replacement</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">char</span><span class="token operator">:</span> <span class="token string">&#39;Tanys&#39;</span><span class="token punctuation">,</span> <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;oracle&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">lvl</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="批量写操作策略" tabindex="-1"><a class="header-anchor" href="#批量写操作策略" aria-hidden="true">#</a> 批量写操作策略</h3><p>大量的插入操作（包括初始数据插入或常规数据导入）可能会影响分片集群的性能。对于批量插入，请考虑以下策略：</p><h4 id="预拆分-collection" tabindex="-1"><a class="header-anchor" href="#预拆分-collection" aria-hidden="true">#</a> 预拆分 collection</h4>`,5),jn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-chunk",target:"_blank",rel:"noopener noreferrer"},Wn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-chunk",target:"_blank",rel:"noopener noreferrer"},qn=n("h4",{id:"无序写操作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#无序写操作","aria-hidden":"true"},"#"),s(" 无序写操作")],-1),zn={href:"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite",target:"_blank",rel:"noopener noreferrer"},An=n("code",null,"bulkWrite()",-1),Cn={href:"https://docs.mongodb.com/manual/reference/program/mongos/#bin.mongos",target:"_blank",rel:"noopener noreferrer"},Ln=n("code",null,"mongos",-1),Sn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-chunk",target:"_blank",rel:"noopener noreferrer"},En=t('<h4 id="避免单调节流" tabindex="-1"><a class="header-anchor" href="#避免单调节流" aria-hidden="true">#</a> 避免单调节流</h4><p>如果在一次插入操作中，分片 key 单调递增，那么所有的插入数据都会存入 collection 的最后一个 chunk，也就是存入一个分片中。因此，集群的插入容量将永远不会超过该单个分片的插入容量。</p><p>如果插入量大于单个分片可以处理的插入量，并且无法避免单调递增的分片键，那么请考虑对应用程序进行以下修改：</p><ul><li>反转分片密钥的二进制位。这样可以保留信息，并避免将插入顺序与值序列的增加关联起来。</li><li>交换第一个和最后一个 16 位字以“随机”插入。</li></ul><h2 id="sql-和-mongodb-对比" tabindex="-1"><a class="header-anchor" href="#sql-和-mongodb-对比" aria-hidden="true">#</a> SQL 和 MongoDB 对比</h2><h3 id="术语和概念" tabindex="-1"><a class="header-anchor" href="#术语和概念" aria-hidden="true">#</a> 术语和概念</h3>',6),Nn=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},"SQL 术语和概念"),n("th",{style:{"text-align":"left"}},"MongoDB 术语和概念")])],-1),$n=n("td",{style:{"text-align":"left"}},"database",-1),Tn={style:{"text-align":"left"}},In={href:"https://docs.mongodb.com/manual/reference/glossary/#term-database",target:"_blank",rel:"noopener noreferrer"},Rn=n("td",{style:{"text-align":"left"}},"table",-1),Un={style:{"text-align":"left"}},Qn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-collection",target:"_blank",rel:"noopener noreferrer"},Pn=n("td",{style:{"text-align":"left"}},"row",-1),Vn={style:{"text-align":"left"}},Gn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-document",target:"_blank",rel:"noopener noreferrer"},Fn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-bson",target:"_blank",rel:"noopener noreferrer"},Hn=n("td",{style:{"text-align":"left"}},"column",-1),Jn={style:{"text-align":"left"}},Kn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-field",target:"_blank",rel:"noopener noreferrer"},Xn=n("td",{style:{"text-align":"left"}},"index",-1),Yn={style:{"text-align":"left"}},Zn={href:"https://docs.mongodb.com/manual/reference/glossary/#term-index",target:"_blank",rel:"noopener noreferrer"},ns=n("td",{style:{"text-align":"left"}},"table joins",-1),ss={style:{"text-align":"left"}},as={href:"https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup",target:"_blank",rel:"noopener noreferrer"},es=n("code",null,"$lookup",-1),ts=n("td",{style:{"text-align":"left"}},"primary key",-1),os={style:{"text-align":"left"}},ps={href:"https://docs.mongodb.com/manual/reference/glossary/#term-primary-key",target:"_blank",rel:"noopener noreferrer"},rs=n("br",null,null,-1),ls={href:"https://docs.mongodb.com/manual/reference/glossary/#term-id",target:"_blank",rel:"noopener noreferrer"},cs=n("code",null,"_id",-1),is=n("td",{style:{"text-align":"left"}},"aggregation (e.g. group by)",-1),us={style:{"text-align":"left"}},ds=n("br",null,null,-1),ks={href:"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/",target:"_blank",rel:"noopener noreferrer"},ms=n("td",{style:{"text-align":"left"}},"SELECT INTO NEW_TABLE",-1),bs={style:{"text-align":"left"}},hs={href:"https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out",target:"_blank",rel:"noopener noreferrer"},ys=n("code",null,"$out",-1),gs=n("br",null,null,-1),_s={href:"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/",target:"_blank",rel:"noopener noreferrer"},vs=n("td",{style:{"text-align":"left"}},"MERGE INTO TABLE",-1),fs={style:{"text-align":"left"}},xs={href:"https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge",target:"_blank",rel:"noopener noreferrer"},Ms=n("code",null,"$merge",-1),ws=n("br",null,null,-1),Ds={href:"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/",target:"_blank",rel:"noopener noreferrer"},Bs=n("td",{style:{"text-align":"left"}},"UNION ALL",-1),Os={style:{"text-align":"left"}},js={href:"https://docs.mongodb.com/manual/reference/operator/aggregation/unionWith/#pipe._S_unionWith",target:"_blank",rel:"noopener noreferrer"},Ws=n("code",null,"$unionWith",-1),qs=n("td",{style:{"text-align":"left"}},"transactions",-1),zs={style:{"text-align":"left"}},As={href:"https://docs.mongodb.com/manual/core/transactions/",target:"_blank",rel:"noopener noreferrer"},Cs=n("h2",{id:"参考资料",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考资料","aria-hidden":"true"},"#"),s(" 参考资料")],-1),Ls=n("strong",null,"官方",-1),Ss={href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"},Es={href:"https://github.com/mongodb/mongo",target:"_blank",rel:"noopener noreferrer"},Ns={href:"https://university.mongodb.com/",target:"_blank",rel:"noopener noreferrer"},$s=n("strong",null,"教程",-1),Ts={href:"https://www.runoob.com/mongodb/mongodb-tutorial.html",target:"_blank",rel:"noopener noreferrer"},Is={href:"https://time.geekbang.org/course/intro/100040001",target:"_blank",rel:"noopener noreferrer"};function Rs(Us,Qs){const a=p("ExternalLinkIcon");return r(),l("div",null,[i,n("ul",null,[n("li",null,[n("a",u,[d,e(a)]),s("：插入一条 document")]),n("li",null,[n("a",k,[m,e(a)]),s("：插入多条 document")])]),b,h,y,n("ul",null,[g,_,n("li",null,[s("在 MongoDB 中，存储在集合中的每个文档都需要一个唯一的 "),n("a",v,[f,e(a)]),s(" 字段作为主键。如果插入的文档省略 "),x,s(" 字段，则 MongoDB 驱动程序会自动为 "),M,s(" 字段生成 ObjectId。")]),w]),D,n("p",null,[s("MongoDB 提供 "),n("a",B,[O,e(a)]),s(" 方法来检索 document。")]),j,W,q,n("ul",null,[n("li",null,[n("a",z,[A,e(a)]),s("：更新一条 document")]),n("li",null,[n("a",C,[L,e(a)]),s("：更新多条 document")]),n("li",null,[n("a",S,[E,e(a)]),s("：替换一条 document")])]),N,n("ul",null,[n("li",null,[n("a",$,[T,e(a)])]),n("li",null,[n("a",I,[R,e(a)])]),n("li",null,[n("a",U,[Q,e(a)])])]),P,n("ul",null,[V,n("li",null,[s("一旦设置了，就无法更新或替换 "),n("a",G,[F,e(a)]),s(" 字段。")]),H,J]),K,X,n("ul",null,[n("li",null,[n("a",Y,[Z,e(a)]),s("：删除一条 document")]),n("li",null,[n("a",nn,[sn,e(a)]),s("：删除多条 document")])]),an,en,tn,on,n("p",null,[s("MongoDB 通过 "),n("a",pn,[rn,e(a)]),s(" 方法来支持批量写操作（包括批量插入、更新、删除）。")]),n("p",null,[s("此外，"),n("a",ln,[cn,e(a)]),s(" 方法支持批量插入操作。")]),un,dn,kn,mn,n("p",null,[s("默认情况下，"),n("a",bn,[hn,e(a)]),s(" 执行有序操作。要指定无序写操作，请在选项文档中设置 "),yn,s("。")]),gn,n("p",null,[n("a",_n,[vn,e(a)]),s(" 支持以下写操作：")]),n("ul",null,[n("li",null,[n("a",fn,[s("insertOne"),e(a)])]),n("li",null,[n("a",xn,[s("updateOne"),e(a)])]),n("li",null,[n("a",Mn,[s("updateMany"),e(a)])]),n("li",null,[n("a",wn,[s("replaceOne"),e(a)])]),n("li",null,[n("a",Dn,[s("deleteOne"),e(a)])]),n("li",null,[n("a",Bn,[s("deleteMany"),e(a)])])]),On,n("p",null,[s("如果分片集合为空，则该集合只有一个初始 "),n("a",jn,[s("chunk"),e(a)]),s("，该 "),n("a",Wn,[s("chunk"),e(a)]),s(" 位于单个分片上。然后，MongoDB 必须花一些时间来接收数据，创建拆分并将拆分的块分发到可用的分片。为了避免这种性能成本，您可以按照拆分群集中的拆分块中的说明预拆分 collection。")]),qn,n("p",null,[s("要提高对分片集群的写入性能，请使用 "),n("a",zn,[An,e(a)]),s("，并将可选参数顺序设置为 false。"),n("a",Cn,[Ln,e(a)]),s(" 可以尝试同时将写入操作发送到多个分片。对于空集合，首先按照分片群集中的分割 "),n("a",Sn,[s("chunk"),e(a)]),s(" 中的说明预拆分 collection。")]),En,n("table",null,[Nn,n("tbody",null,[n("tr",null,[$n,n("td",Tn,[n("a",In,[s("database"),e(a)])])]),n("tr",null,[Rn,n("td",Un,[n("a",Qn,[s("collection"),e(a)])])]),n("tr",null,[Pn,n("td",Vn,[n("a",Gn,[s("document"),e(a)]),s(" 或 "),n("a",Fn,[s("BSON"),e(a)])])]),n("tr",null,[Hn,n("td",Jn,[n("a",Kn,[s("field"),e(a)])])]),n("tr",null,[Xn,n("td",Yn,[n("a",Zn,[s("index"),e(a)])])]),n("tr",null,[ns,n("td",ss,[n("a",as,[es,e(a)]),s("、嵌入式文档")])]),n("tr",null,[ts,n("td",os,[n("a",ps,[s("primary key"),e(a)]),rs,s("MongoDB 中自动设置主键为 "),n("a",ls,[cs,e(a)]),s(" 字段")])]),n("tr",null,[is,n("td",us,[s("aggregation pipeline"),ds,s("参考 "),n("a",ks,[s("SQL to Aggregation Mapping Chart"),e(a)]),s(".")])]),n("tr",null,[ms,n("td",bs,[n("a",hs,[ys,e(a)]),gs,s("参考 "),n("a",_s,[s("SQL to Aggregation Mapping Chart"),e(a)])])]),n("tr",null,[vs,n("td",fs,[n("a",xs,[Ms,e(a)]),s(" (MongoDB 4.2 开始支持)"),ws,s("参考 "),n("a",Ds,[s("SQL to Aggregation Mapping Chart"),e(a)]),s(".")])]),n("tr",null,[Bs,n("td",Os,[n("a",js,[Ws,e(a)]),s(" (MongoDB 4.4 开始支持)")])]),n("tr",null,[qs,n("td",zs,[n("a",As,[s("transactions"),e(a)])])])])]),Cs,n("ul",null,[n("li",null,[Ls,n("ul",null,[n("li",null,[n("a",Ss,[s("MongoDB 官网"),e(a)])]),n("li",null,[n("a",Es,[s("MongoDB Github"),e(a)])]),n("li",null,[n("a",Ns,[s("MongoDB 官方免费教程"),e(a)])])])]),n("li",null,[$s,n("ul",null,[n("li",null,[n("a",Ts,[s("MongoDB 教程"),e(a)])]),n("li",null,[n("a",Is,[s("MongoDB 高手课"),e(a)])])])])])])}const Gs=o(c,[["render",Rs],["__file","02.MongoDB的CRUD操作.html.vue"]]);export{Gs as default};
